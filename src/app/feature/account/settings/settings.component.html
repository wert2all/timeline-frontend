<div class="mt-4 lg:flex lg:gap-4">
  <div class="relative lg:w-64 lg:flex-none">
    <div class="avatar h-full w-full justify-center">
      @if (avatarUrl(); as avatar) {
        <div
          class="h-full w-full rounded-xl ring ring-accent ring-offset-2 ring-offset-base-100">
          <img
            [src]="avatarUrl()"
            class="h-full w-full"
            [alt]="form.controls.name.value" />
        </div>
      } @else {
        <ng-icon name="saxUserSquareBulk" size="242" />
      }
    </div>

    <div class="join absolute -bottom-2 right-0 hidden">
      @if (avatarUrl()) {
        <a
          class="btn btn-warning join-item btn-sm"
          (click)="removeAvatar()"
          (keyup.enter)="removeAvatar()"
          tabindex="0">
          <ng-icon name="saxCloseSquareOutline" size="24" />
        </a>
      }
      <a
        class="btn btn-primary join-item btn-sm"
        (click)="changeAvatar()"
        (keyup.enter)="changeAvatar()"
        tabindex="0">
        <ng-icon name="saxCameraOutline" size="24" />
      </a>
    </div>
  </div>
  <div class="lg:flex-auto">
    <h3 class="text-lg lg:mb-2 lg:text-2xl">name</h3>
    <label class="join w-full">
      <input
        type="text"
        name="name"
        [class.input-error]="form.controls.name.invalid"
        class="input join-item input-bordered w-full grow"
        [formControl]="form.controls.name" />
      <app-feature-flag
        [feature]="'show_user_accounts'"
        [accountSettings]="accountSettings()">
        <button
          class="btn join-item btn-neutral w-auto"
          (click)="addAccount()"
          (keyup.enter)="addAccount()"
          tabindex="0">
          <ng-icon [svg]="addAccountIcon" size="24" />
        </button>
      </app-feature-flag>
    </label>
  </div>
</div>

<input type="hidden" [formControl]="form.controls.accountId" name="accountId" />
<input type="hidden" [formControl]="form.controls.avatarId" name="avatarId" />

<app-shared-form-controls
  [isDisabled]="isDisabled()"
  [isLoading]="isLoading()"
  [acceptButtonIcon]="icon"
  acceptButtonTitle="save"
  (acceptAction)="save()"
  (dismissAction)="closeWindow()" />
